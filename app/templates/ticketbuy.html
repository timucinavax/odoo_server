<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Uçuş Seçimi</title>
    <style>
      /* Genel Stil */
      body,
      html {
        margin: 0;
        padding: 0;
        font-family: "Raleway", sans-serif;
        height: 100%;
        width: 100%;
        overflow-x: hidden;
      }

      .navbar {
        background-color: white;
        padding: 15px;
        z-index: 2;
        position: relative;
      }

      .navbar-brand {
        display: flex;
        align-items: center;
      }

      .navbar-brand img {
        max-height: 50px;
        margin-right: 10px;
      }

      .navbar-brand span {
        font-weight: bold;
        color: black;
        font-size: 1.5rem;
      }

      .navbar-nav .nav-link {
        color: black;
        margin-right: 20px;
        text-transform: uppercase;
        transition: color 0.3s;
      }

      .navbar-nav .nav-link:hover {
        color: #666666;
      }
      .navbar + .breadcrumb-container {
        margin-bottom: 20px;
      }

      /* Breadcrumb Navigation */
      .breadcrumb-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background-color: #fff;
        padding: 15px;
        border-bottom: 1px solid #ddd;
      }

      .breadcrumb-item {
        text-align: center;
        flex: 1;
        cursor: pointer;
        padding: 10px;
        color: #004080;
        background-color: #e9ecef;
        border-radius: 5px;
        transition: background-color 0.3s, color 0.3s;
      }

      .breadcrumb-item.active {
        background-color: #dc3545;
        color: white;
      }

      /* Tarih Seçici */
      .date-selector {
        margin-bottom: 20px;
        display: flex;
        justify-content: center;
        padding: 15px;
        background-color: #fff;
        overflow-x: auto;
        border-bottom: 1px solid #ddd;
      }

      .date-box {
        text-align: center;
        padding: 10px;
        margin: 5px;
        border-radius: 8px;
        border: 1px solid #ddd;
        background-color: #f9f9f9;
        min-width: 100px;
        cursor: pointer;
        transition: background-color 0.3s, color 0.3s;
      }

      .date-box.active {
        background-color: #dc3545;
        color: white;
      }

      .day-number {
        font-size: 1.5rem;
        font-weight: bold;
      }

      .day-name,
      .month-name {
        font-size: 1rem;
        color: #555;
      }

      .price {
        margin-top: 5px;
        font-size: 1.2rem;
        color: #28a745;
        font-weight: bold;
      }

      /* Kartın genel stili */
      .card {
        display: flex; /* Kartın içerisindeki elemanların yan yana durmasını sağlar */
        align-items: center; /* Elemanların dikeyde ortalanmasını sağlar */
        justify-content: space-between; /* Elemanlar arasında boşluk bırakır */
        padding: 20px; /* Kartın içindeki elemanlarla kenarlar arasındaki boşluk */
        border: 1px solid #ddd; /* Kartın kenar çizgisi */
        border-radius: 8px; /* Kartın köşelerini yuvarlar */
        background-color: #fff; /* Kartın arka plan rengi */
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Hafif gölge efekti */
        width: 1200px; /* Kartın genişliği */
        margin: 10px auto; /* Kartın etrafındaki boşluk */
      }

      /* Sol taraftaki bilgi bloğu */
      .card-left {
        display: flex; /* Bilgilerin yatayda yan yana gelmesini sağlar */
        align-items: center; /* Bilgileri dikeyde ortalar */
      }

      /* Zaman ve havaalanı bilgilerini tutan blok */
      .time-info {
        text-align: center; /* Metinlerin ortalanmasını sağlar */
        margin-right: 20px; /* Bilgiler arasında boşluk bırakır */
      }

      .time-info p {
        margin: 5px 0; /* Paragraflar arasında boşluk bırakır */
        font-weight: bold; /* Metinleri kalın yapar */
        font-size: 1.2rem; /* Metin boyutunu büyütür */
      }

      /* Uçuş rotasını temsil eden çizgiler */
      .route {
        display: flex; /* Çizgilerin ve logonun yatayda yan yana gelmesini sağlar */
        align-items: center; /* Dikeyde ortalanmasını sağlar */
      }

      .route-line {
        width: 100px; /* Çizginin genişliği */
        height: 1px; /* Çizginin kalınlığı */
        background-color: #000; /* Çizginin rengi */
        position: relative; /* Noktaların çizgiye göre konumlanmasını sağlar */
        margin: 0 10px; /* Çizgi ve logo arasındaki boşluk */
      }

      /* Rota çizgisine noktalar ekleme */
      .route-line::before,
      .route-line::after {
        content: "";
        position: absolute;
        top: -5px;
        width: 10px;
        height: 10px;
        background-color: #004080; /* Noktaların rengi */
        border-radius: 50%; /* Noktaların daire şeklinde olmasını sağlar */
      }

      .route-line::before {
        left: 0; /* İlk noktanın konumu */
      }

      .route-line::after {
        right: 0; /* İkinci noktanın konumu */
      }

      /* Rota logosu (örneğin, uçak ikonu gibi) */
      .route-logo {
        width: 20px; /* Logonun genişliği */
        height: 20px; /* Logonun yüksekliği */
        background-image: url("{{ url_for('static', filename='images/sehlen_logo.png') }}"); /* Flask'tan gelen logo */
        background-size: cover; /* Logonun boyutunu kapsama ayarla */
        background-position: center; /* Logonun ortalanmasını sağlar */
        border-radius: 50%; /* Logonun daire şeklinde olmasını sağlar */
        background-color: transparent; /* Arka plan rengini kaldırır */
      }
      .details-button {
        background-color: transparent;
        border: none;
        color: #004080;
        cursor: pointer;
        font-weight: bold;
        font-size: 1rem;
        display: flex;
        align-items: center;
        position: relative;
      }

      .details-button:hover {
        color: #002050; /* Hover üzerinde renk koyulaşır */
      }

      .details-button::after {
        content: "▼"; /* Başlangıçta ok işareti aşağıyı gösterir */
        margin-left: 10px;
        font-size: 0.8rem;
        transition: transform 0.3s ease;
      }

      .details-button.collapsed::after {
        transform: rotate(-90deg); /* Tıklandığında oku yana döndür */
      }

      .details-content {
        display: none;
        margin-top: 10px;
      }

      .details-content p {
        margin: 5px 0;
        font-size: 0.9rem;
        color: #555;
      }

      /* Bileti Al düğmesi */
      .buy-ticket-button {
        background-color: #28a745;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
        margin-top: 10px;
      }

      .buy-ticket-button:hover {
        background-color: #218838;
      }

      .footer {
        background-color: #f8f9fa;
        padding: 40px 0;
      }

      .footer h5 {
        font-size: 16px;
        margin-bottom: 20px;
        font-weight: bold;
      }

      .footer ul {
        list-style: none;
        padding: 0;
      }

      .footer ul li {
        margin-bottom: 10px;
      }

      .footer ul li strong {
        display: block;
        margin-bottom: 5px;
      }

      .footer ul.list-inline {
        margin-top: 10px;
      }

      .footer ul.list-inline li {
        margin-right: 10px;
      }

      .footer .tursab-link {
        display: block;
        margin-top: 20px;
      }

      .footer .tursab-img {
        width: 100%;
        height: auto;
      }

      .footer .logo-section {
        margin-top: 30px;
      }

      .footer .logo-section img {
        margin: 10px;
        max-height: 50px;
      }

      .footer .text-muted {
        font-size: 14px;
        color: #6c757d;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="{{ url_for('dashboard')}}">
          <img
            src="{{ url_for('static', filename='images/sehlen_logo.png') }}"
            alt="Sehlen Tourism"
          />
          <span>SEHLEN TOURISM</span>
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div
          class="collapse navbar-collapse justify-content-end"
          id="navbarNav"
        >
          <ul class="navbar-nav">
            {% if logged_in_user %} {% if logged_in_user_role == 'admin' %}
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('admin_panel') }}"
                >Go to Admin Panel</a
              >
            </li>
            {% endif %}
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('ticketbuy') }}"
                >Welcome, {{ logged_in_user }}</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('travel') }}"
                >Travel Experience</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('offer') }}">Offers</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('support') }}">Support</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('logout') }}">Logout</a>
            </li>
            {% else %}
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('travel') }}"
                >Travel Experience</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('offer') }}">Offers</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('support') }}">Support</a>
            </li>
            <button
              class="btn btn-outline-dark ms-3"
              onclick="goToLogin()"
              id="loginButton"
            >
              Sign In
            </button>
            <button
              class="btn btn-outline-dark ms-3"
              onclick="goToLogin()"
              id="registerButton"
            >
              Sign Up
            </button>
            {% endif %}
          </ul>
        </div>
      </div>
    </nav>

    <div class="breadcrumb-container">
      <div class="breadcrumb-item active" data-number="0">
        <div class="arrow-before"></div>
        <div class="arrow-after"></div>
        <em>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 30.731 13.566"
            width="1em"
            height="1em"
            fill="currentColor"
          >
            <g fill="#fff">
              <path d="m0 10.455 2.951 1.708-2.333.981L0 12.305v-1.85Z"></path>
              <path
                d="m.962 13.477 9.471-4.367-4.716-7.532c.33-.474.665-.93.974-1.407.186-.288.356-.147.552-.042 3.282 1.745 6.571 3.474 9.841 5.247a1.639 1.639 0 0 0 1.64.067c2.828-1.297 5.684-2.533 8.528-3.794a3.5 3.5 0 0 1 2.568-.093 1.19 1.19 0 0 1 .741 1.814 4.646 4.646 0 0 1-2.356 2.56c-5.713 2.53-11.44 5.023-17.163 7.527a1.072 1.072 0 0 1-.413.1q-4.829.009-9.659 0Z"
              ></path>
            </g>
          </svg>
        </em>
        <b>Uçuş seçimi</b>
      </div>
      <div class="breadcrumb-item" data-number="1">
        <div class="arrow-before"></div>
        <div class="arrow-after"></div>
        <em>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 13.512 19.87"
            width="1em"
            height="1em"
            fill="currentColor"
          >
            <path
              fill="#fff"
              d="M13.51 10.507v4.933a4.334 4.334 0 0 1-4.221 4.43H.003v-5.8a3.381 3.381 0 0 1 .929-2.47 3.517 3.517 0 0 1 2.449-1.093Zm-6.509-1.4a4.51 4.51 0 0 1-4.465-4.553 4.466 4.466 0 1 1 8.931 0 4.51 4.51 0 0 1-4.465 4.554Z"
            ></path>
          </svg>
        </em>
        <b>Yolcu bilgileri</b>
      </div>
      <div class="breadcrumb-item" data-number="2">
        <div class="arrow-before"></div>
        <div class="arrow-after"></div>
        <em>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 18.55 16.874"
            width="1em"
            height="1em"
            fill="currentColor"
          >
            <path
              fill="#fff"
              d="M8.325 0a1.88 1.88 0 0 0-.685.135L1.1 2.85a1.771 1.771 0 0 0-.967 2.3l4.408 10.636a1.791 1.791 0 0 0 1.608 1.088 1.771 1.771 0 0 0 .7-.13l6.545-2.712a1.779 1.779 0 0 0 1.092-1.6 1.612 1.612 0 0 0-.134-.707L9.948 1.092A1.777 1.777 0 0 0 8.324.001Zm3.087 0 3.071 7.412V1.778A1.786 1.786 0 0 0 12.702.001h-1.289Zm4.849 1.371V9.39l2.16-5.2a1.79 1.79 0 0 0-.967-2.316l-1.192-.5Z"
            ></path>
          </svg>
        </em>
        <b>Ek hizmetler</b>
      </div>
      <div class="breadcrumb-item" data-number="3">
        <div class="arrow-before"></div>
        <div class="arrow-after"></div>
        <em>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 26.702 18.653"
            width="1em"
            height="1em"
            fill="currentColor"
          >
            <path
              fill="#fff"
              d="M26.658 3.51H.811A6.348 6.348 0 0 1 6.665 0h19.993Zm0 3.528.042 1.287V9.78a9.2 9.2 0 0 1-.067 1.166 9.7 9.7 0 0 1-.556 2.228 8.362 8.362 0 0 1-7.775 5.479H0V7.038Z"
            ></path>
          </svg>
        </em>
        <b>Ödeme</b>
      </div>
    </div>

    <div class="date-selector">
      {% for date in dates %}
      <div class="date-box" onclick="showFlights('{{ date }}')">
        <div class="day-number">{{ date.split('-')[2] }}</div>
        <div class="day-name">{{ date | dayname }}</div>
        <div class="month-name">{{ date | monthname }}</div>
        <div class="price">TRY {{ date_prices[date] }}</div>
      </div>
      {% endfor %}
    </div>

    <div class="flights-container" id="flights-container"></div>

    <footer class="footer">
      <div class="container">
        <div class="row">
          <div class="col-md-3">
            <h5>Bize Ulaşın</h5>
            <ul class="list-unstyled">
              <li>
                <strong>İstanbul Merkez</strong>
                <p>
                  Akşemsettin Mh. Akdeniz Cd. Hakperest Sk. No:32 D:5 Fatih
                  İSTANBUL
                </p>
              </li>
              <li>
                <strong>İstanbul Fatih</strong>
                <p>
                  Akşemsettin Mh. Halıcılar Cad. Çiftekumrular Sok. No:44/1
                  Fatih İSTANBUL
                </p>
              </li>
              <li>
                <strong>Konya Ofis</strong>
                <p>
                  Feritpaşa Mah. Akcanlar Sok. No:35 Selçuklu / KONYA<br />+90
                  533 364 44 35
                </p>
              </li>
              <li>
                <strong>Berlin Ofis</strong>
                <p>Schöneberger Str. 11 10963 BERLIN</p>
              </li>
            </ul>
          </div>

          <div class="col-md-3">
            <h5>E-Posta & Telefon</h5>
            <ul class="list-unstyled">
              <li><strong>E-Posta:</strong> info@sehlentur.com</li>
              <li><strong>Telefon:</strong> +90 212 635 70 77</li>
              <li><strong>WhatsApp:</strong> +90 533 364 44 35</li>
            </ul>
            <h5>Belge No</h5>
            <ul class="list-unstyled">
              <li><strong>TURSAB Belge No:</strong> 7952</li>
              <li><strong>IATA No:</strong> 88-2 1883 0</li>
            </ul>
          </div>

          <div class="col-md-3">
            <h5>Banka Hesap Numaralarımız</h5>
            <ul class="list-unstyled">
              <li>
                <strong>Kuveyt Türk Kıztaşı Şubesi</strong><br />TL IBAN: TR02
                0020 5000 0948 1765 2000 01<br />EUR IBAN: TR88 0020 5000 0948
                1765 2001 02<br />USD IBAN: TR18 0020 5000 0948 1765 2001 01
              </li>
              <li>
                <strong>Türkiye Finans Katılım Bankası Yavuzselim Şubesi</strong
                ><br />USD IBAN: TR82 0020 6000 5303 0787 7401 01
              </li>
              <li>
                <strong>Albaraka Türk Fatih Şubesi</strong><br />USD IBAN: TR84
                0020 3000 0223 4063 0000 02
              </li>
            </ul>
          </div>

          <div class="col-md-3">
            <h5>Umre</h5>
            <ul class="list-unstyled">
              <li>
                <a href="https://www.sehlentur.com/umre-nedir/">Umre Nedir?</a>
              </li>
              <li>
                <a href="https://www.sehlentur.com/umre-icin-onemli-bilgiler/"
                  >Umre İçin Önemli Bilgiler</a
                >
              </li>
              <li>
                <a href="https://www.sehlentur.com/umre-icin-gerekli-evraklar/"
                  >Umre İçin Gerekli Evraklar</a
                >
              </li>
              <li>
                <a href="https://www.sehlentur.com/ihram-yasaklari-nelerdir/"
                  >İhram Yasakları Nelerdir?</a
                >
              </li>
              <li>
                <a href="https://www.sehlentur.com/umre-hac-iliskisi/"
                  >Umre Hac İlişkisi</a
                >
              </li>
              <li>
                <a href="https://www.sehlentur.com/umre-ziyaret-yerleri/"
                  >Umre Ziyaret Yerleri</a
                >
              </li>
              <li>
                <a href="https://www.sehlentur.com/umre-sozlugu/"
                  >Umre Sözlüğü</a
                >
              </li>
            </ul>
            <h5>Sosyal Medya Hesaplarımız</h5>
            <ul class="list-inline">
              <li class="list-inline-item">
                <a href="https://www.facebook.com/sehlentour" target="_blank"
                  >Facebook</a
                >
              </li>
              <li class="list-inline-item">|</li>
              <li class="list-inline-item">
                <a
                  href="https://www.instagram.com/sehlen_turizm"
                  target="_blank"
                  >Instagram</a
                >
              </li>
            </ul>
            <a
              href="https://www.tursab.org.tr/tr/ddsv"
              target="_blank"
              class="tursab-link"
            >
              <img
                src="https://www.sehlentur.com/wp-content/uploads/2022/02/tursab-dds-7952.png"
                alt="TURSAB Belge"
                class="tursab-img"
              />
            </a>
          </div>
        </div>

        <hr />

        <div class="text-center logo-section">
          <img
            src="https://www.sehlentur.com/wp-content/uploads/2018/10/islamgroup-logo.jpg"
            alt="Islam Group"
            width="100"
            height="50"
          />
          <img
            src="https://www.sehlentur.com/wp-content/uploads/2018/10/hursad-logo.jpg"
            alt="Hursad"
            width="100"
            height="50"
          />
          <img
            src="https://www.sehlentur.com/wp-content/uploads/2018/08/tursablogo.png"
            alt="TURSAB"
            width="100"
            height="50"
          />
          <img
            src="https://www.sehlentur.com/wp-content/uploads/2018/08/iatalogo.png"
            alt="IATA"
            width="100"
            height="50"
          />
          <img
            src="https://www.sehlentur.com/wp-content/uploads/2018/08/thy-kurum-logo.jpg"
            alt="THY"
            width="100"
            height="50"
          />
          <img
            src="https://www.sehlentur.com/wp-content/uploads/2018/08/diyanet-logo.jpg"
            alt="Diyanet"
            width="100"
            height="50"
          />
          <img
            src="https://www.sehlentur.com/wp-content/uploads/2018/08/turkiye-logo.jpg"
            alt="Turkey"
            width="100"
            height="50"
          />
        </div>

        <div class="row mt-3">
          <div class="col-md-12 text-center">
            <p class="text-muted">
              &copy; 2024 Sehlen Tourism. Tüm Hakları Saklıdır.
            </p>
          </div>
        </div>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
      const flightsData = {{ flights|tojson }};

      function showFlights(date) {
          document.querySelectorAll('.date-box').forEach(box => box.classList.remove('active'));
          document.querySelector(`.date-box[onclick="showFlights('${date}')"]`).classList.add('active');

          const flightsContainer = document.getElementById('flights-container');
          flightsContainer.innerHTML = '';

          const flights = flightsData.filter(flight => flight.departure_time.startsWith(date));
          if (flights.length > 0) {
              flights.forEach(flight => {
                const flightDuration = calculateFlightDuration(flight.departure_time, flight.arrival_time);

                const flightCard = `
                  <div class="card">
                    <div class="card-left">
                      <div class="time-info">
                          <p><span class="heading">Uçuş Numarası:</span> ${flight.flight_number}</p>
                      </div>
                      <div class="time-info">
                        <p>${flight.departure_time.split(" ")[1]}</p>
                        <p>${flight.departure_airport}</p>
                      </div>
                      <div class="route">
                        <div class="route-line"></div>
                        <div class="route-logo"></div>
                        <div class="route-line"></div>
                      </div>
                      <div class="time-info">
                        <p>${flight.arrival_time.split(" ")[1]}</p>
                        <p>${flight.arrival_airport}</p>
                      </div>
                      <div class="time-info">
                          <p><span class="heading">Fiyat:</span> ${flight.price} TL</p>
                          <p><span class="heading">Süre:</span> ${flightDuration}</p>
                      </div>
                    </div>
                    <div class="card-right">
                      <button class="details-button" onclick="toggleDetails(this)">Seyahat Detayları</button>
                      <div class="details-content">
                          <p><span class="heading">Uçuş Numarası:</span> ${flight.flight_number}</p>
                          <p><span class="heading">Kalkış Zamanı:</span> ${flight.departure_time}</p>
                          <p><span class="heading">Varış Zamanı:</span> ${flight.arrival_time}</p>
                          <p><span class="heading">Fiyat:</span> ${flight.price} TL</p>
                          <p><span class="heading">Uçuş Yönü:</span> ${flight.flight_direction}</p>
                          <p><span class="heading">Koltuk Sayısı:</span> ${flight.available_seats}</p>
                      </div>
                    </div>
                    <div class="time-info">
                        <button class="buy-ticket-button" onclick="buyTicket('${flight.flight_number}')">Bileti Al</button>
                    </div>
                  </div>
                `;
                flightsContainer.innerHTML += flightCard;
              });
          } else {
              flightsContainer.innerHTML = '<div class="no-flights">Bu tarihte uçuş bulunmamaktadır.</div>';
          }
      }

      function toggleDetails(button) {
          const detailsContent = button.nextElementSibling;
          if (detailsContent.style.display === 'block') {
              detailsContent.style.display = 'none';
              button.classList.remove('collapsed');
          } else {
              detailsContent.style.display = 'block';
              button.classList.add('collapsed');
          }
      }

      function buyTicket(flightNumber) {
          alert(`Flight code: ${flightNumber} için bilet alındı.`);
      }

      function calculateFlightDuration(departureTime, arrivalTime) {
          const departure = new Date(departureTime);
          const arrival = new Date(arrivalTime);
          const duration = new Date(arrival - departure);

          const hours = Math.floor(duration / (1000 * 60 * 60));
          const minutes = Math.floor((duration % (1000 * 60 * 60)) / (1000 * 60));

          return `${hours}h ${minutes}m`;
      }
    </script>
  </body>
</html>
